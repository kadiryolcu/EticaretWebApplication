<aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
  <div class="app-brand demo">
    <a asp-controller="Home" asp-action="Index" class="app-brand-link">
      <span class="app-brand-logo demo">
        <svg width="32" height="32" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
          <!-- Sepet simgesi -->
          <rect x="12" y="20" width="40" height="28" rx="4" fill="#4CAF50" />
          <path d="M16 20 L20 12 H44 L48 20" stroke="#388E3C" stroke-width="2" fill="none" />
          <circle cx="22" cy="50" r="4" fill="#388E3C" />
          <circle cx="42" cy="50" r="4" fill="#388E3C" />
          <!-- E harfi -->
          <text x="32" y="34" font-size="16" text-anchor="middle" fill="white" font-family="Arial, sans-serif"
            font-weight="bold">E</text>
        </svg>
      </span>

      <span class="app-brand-text demo menu-text fw-bold">MyShop</span>
    </a>
    <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto">
      <i class="ti menu-toggle-icon d-none d-xl-block ti-sm align-middle"></i>
      <i class="ti ti-x d-block d-xl-none ti-sm align-middle"></i>
    </a>
  </div>

  <div class="menu-inner-shadow"></div>

  <ul class="menu-inner py-1">
    <li class="menu-item active">
      <a href="/Home/Index" class="menu-link">
        <i class="menu-icon tf-icons ti ti-smart-home"></i>
        <div data-i18n="Mağaza">Mağaza</div>
      </a>
    </li>
    <li class="menu-item">
      <a asp-action="Sepettekiler" class="menu-link">
        <i class="menu-icon tf-icons ti ti-shopping-cart"></i>
        <div data-i18n="Sepettekiler">Sepettekiler</div>
      </a>
    </li>
    <li class="menu-item ">
      <a href="/Home/Siparislerim" class="menu-link">
        <i class="menu-icon tf-icons ti ti-smart-home"></i>
        <div data-i18n="Siparişlerim">Siparişlerim</div>
      </a>
    </li>
    <li class="menu-item">
      <a href="/Settings" class="menu-link">
        <i class="menu-icon tf-icons ti ti-settings"></i>
        <div data-i18n="Ayarlar">Ayarlar</div>
      </a>
    </li>
  </ul>
</aside>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const currentPath = window.location.pathname.replace(/\/$/, ""); // son slash'i kaldır

    // Tüm menu linklerini seç
    const menuLinks = document.querySelectorAll('#layout-menu .menu-link');

    menuLinks.forEach(link => {
      const linkPath = link.getAttribute('href').replace(/\/$/, ""); // son slash'i kaldır

      if (linkPath === currentPath) {
        // Tüm aktifleri ve open'ları temizle
        document.querySelectorAll('#layout-menu .menu-item.active').forEach(item => {
          item.classList.remove('active', 'open');
        });

        const menuItem = link.closest('.menu-item');
        if (menuItem) {
          menuItem.classList.add('active');

          // Eğer alt menü varsa üst menüleri de open yap
          let parent = menuItem.parentElement;
          while (parent && parent.classList.contains('menu-sub')) {
            const parentItem = parent.closest('.menu-item');
            if (parentItem) parentItem.classList.add('active', 'open');
            parent = parentItem ? parentItem.parentElement : null;
          }
        }
      }
    });
  });
</script>